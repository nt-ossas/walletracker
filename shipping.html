<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tracker</title>
    <meta charset="UTF-8">
    <link rel="icon" href="https://cdni.iconscout.com/illustration/premium/thumb/e-wallet-illustration-download-in-svg-png-gif-file-formats--secure-digital-online-banking-transaction-business-activities-pack-people-illustrations-4609252.png?f=webp"/>
    <meta name="author" content="Alex Graziano">
    <meta name="theme-color" content="#28293D">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
            integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
    <script src="js/script.js" defer></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile.css">
</head>
<body>
    <!-- header -->
    <header>
        <div class="container">
            <img src="https://cdni.iconscout.com/illustration/premium/thumb/e-wallet-illustration-download-in-svg-png-gif-file-formats--secure-digital-online-banking-transaction-business-activities-pack-people-illustrations-4609252.png?f=webp">
            <div class="content">
                <h1>Shipping Tracker</h1>
            </div>
        </div>
    </header>
    <!-- scrolltext -->
    <div class="separa">
        <div class="scroll-text">
            <h3>Track Expenses</h3>
            <h3>-</h3>
            <h3>Manage Budget</h3>
            <h3>-</h3>
            <h3>Financial Goals</h3>
            <h3>-</h3>
            <h3>Income Tracker</h3>
            <h3>-</h3>
            <h3>Expense Categories</h3>
            <h3>-</h3>
            <h3>Monthly Reports</h3>
            <h3>-</h3>
            <h3>Transaction History</h3>
            <h3>-</h3>
            <h3>Balance Overview</h3>
            <h3>-</h3>
        </div>
    </div>
    <!-- main content -->
    <main>
        <div class="box">
            <h3>Aggiungi Vendita</h3>
            <form id="addSaleForm">
                <div class="row">
                    <label for="saleName">Nome della Vendita:</label>
                    <input type="text" id="saleName" name="saleName" required>
                </div>
                <div class="row">
                    <label for="saleStatus">Stato della Vendita:</label>
                    <select id="saleStatus" name="saleStatus" required>
                        <option value="proposta accettata">Proposta Accettata</option>
                        <option value="preparato">Preparato</option>
                        <option value="spedito">Spedito</option>
                        <option value="consegnato">Consegnato</option>
                        <option value="completato">Completato</option>
                    </select>
                </div>
                <div class="row">
                    <label for="saleDate">Data di Cambio Stato:</label>
                    <input type="date" id="saleDate" name="saleDate">
                </div>
                <button type="submit">Aggiungi</button>
            </form>
        </div>
        <div id="salesContainer" class="box">
            <h3>Vendite</h3>
            <!-- Le vendite verranno aggiunte qui -->
        </div>
    </main>
    <!--footer-->
    <footer>
        <div class="box">
            <h4 class="tag">2025 shipping Tracker &copy; - All Rights Reserved - Powered by Ossas</h4>
        </div>
    </footer>
    <script>
        document.getElementById('addSaleForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const saleName = document.getElementById('saleName').value;
            const saleStatus = document.getElementById('saleStatus').value;
            const saleDate = document.getElementById('saleDate').value || new Date().toISOString().split('T')[0];
            addSale(saleName, saleStatus, saleDate);
        });

        function addSale(name, status, date) {
            const sale = {
                name: name,
                status: status,
                date: date,
                statusDates: {
                    'proposta accettata': status === 'proposta accettata' ? date : '',
                    'preparato': status === 'preparato' ? date : '',
                    'spedito': status === 'spedito' ? date : '',
                    'consegnato': status === 'consegnato' ? date : '',
                    'completato': status === 'completato' ? date : ''
                }
            };
            saveSale(sale);
            renderSale(sale);
        }

        function saveSale(sale) {
            const sales = JSON.parse(localStorage.getItem('sales')) || [];
            sales.push(sale);
            localStorage.setItem('sales', JSON.stringify(sales));
        }

        function loadSales() {
            const sales = JSON.parse(localStorage.getItem('sales')) || [];
            sales.forEach(sale => renderSale(sale));
        }

        function renderSale(sale) {
            const salesContainer = document.getElementById('salesContainer');
            const saleElement = document.createElement('div');
            saleElement.classList.add('sale');
            saleElement.innerHTML = `
                <h4>${sale.name}</h4>
                <p>Data di Cambio Stato: ${sale.date}</p>
                <div class="status-bar">
                    <div class="status ${sale.status === 'proposta accettata' || sale.status === 'preparato' || sale.status === 'spedito' || sale.status === 'consegnato' || sale.status === 'completato' ? 'active' : ''}"></div>
                    <div class="status ${sale.status === 'preparato' || sale.status === 'spedito' || sale.status === 'consegnato' || sale.status === 'completato' ? 'active' : ''}"></div>
                    <div class="status ${sale.status === 'spedito' || sale.status === 'consegnato' || sale.status === 'completato' ? 'active' : ''}"></div>
                    <div class="status ${sale.status === 'consegnato' || sale.status === 'completato' ? 'active' : ''}"></div>
                    <div class="status ${sale.status === 'completato' ? 'active' : ''}"></div>
                </div>
                <select onchange="updateSaleStatus('${sale.name}', this.value)">
                    <option value="proposta accettata" ${sale.status === 'proposta accettata' ? 'selected' : ''}>Proposta Accettata</option>
                    <option value="preparato" ${sale.status === 'preparato' ? 'selected' : ''}>Preparato</option>
                    <option value="spedito" ${sale.status === 'spedito' ? 'selected' : ''}>Spedito</option>
                    <option value="consegnato" ${sale.status === 'consegnato' ? 'selected' : ''}>Consegnato</option>
                    <option value="completato" ${sale.status === 'completato' ? 'selected' : ''}>Completato</option>
                </select>
                <input type="date" onchange="updateSaleDate('${sale.name}', this.value)" value="${sale.date}">
            `;
            salesContainer.appendChild(saleElement);
        }

        function updateSaleStatus(name, status) {
            const sales = JSON.parse(localStorage.getItem('sales')) || [];
            const sale = sales.find(s => s.name === name);
            if (sale) {
                sale.status = status;
                sale.statusDates[status] = new Date().toISOString().split('T')[0];
                localStorage.setItem('sales', JSON.stringify(sales));
                document.getElementById('salesContainer').innerHTML = '';
                loadSales();
            }
        }

        function updateSaleDate(name, date) {
            const sales = JSON.parse(localStorage.getItem('sales')) || [];
            const sale = sales.find(s => s.name === name);
            if (sale) {
                sale.date = date;
                sale.statusDates[sale.status] = date;
                localStorage.setItem('sales', JSON.stringify(sales));
                document.getElementById('salesContainer').innerHTML = '';
                loadSales();
            }
        }

        document.addEventListener('DOMContentLoaded', loadSales);
    </script>
</body>
</html>